(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{84:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(16),s=n.n(r),o=n(21),i=n(119),l=n(123),j=n(121),u=n(118),b=n(35),d=b.a.initializeApp({apiKey:"AIzaSyDvG2Rp1VY_6_FLNU-K-EMiSPlUihDduBo",authDomain:"instagram-clone-9ffaa.firebaseapp.com",projectId:"instagram-clone-9ffaa",storageBucket:"instagram-clone-9ffaa.appspot.com",messagingSenderId:"251776803306",appId:"1:251776803306:web:043191b6733790bba99293",measurementId:"G-BVRR5X0CBJ"}).firestore(),p=b.a.auth(),O=b.a.storage(),m=n(40),h=n(124),x=n(66),f=n.n(x),g=n(112),v=n(113),y=n(122),C=n(114),S=n(115),w=n(125),N=n(126),k=n.p+"static/media/Mclaren Senna.89c47dc3.jpg",_=(n(84),n(4)),I=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],s=n[1],i=Object(a.useRef)(null),l=function(t){i.current&&i.current.contains(t.target)||(d.collection("posts").onSnapshot((function(t){for(var n=t.docs.map((function(e){return{id:e.id,post:e.data()}})),a=0;a<n.length;a++)n[a].id===e.postId&&n[a].post.username===e.name&&d.collection("posts").doc(e.postId).delete()})),s(!1))},j=function(e){i.current&&i.current.contains(e.target)||s(!1)};function u(e){"Tab"===e.key&&(e.preventDefault(),s(!1))}var b=c.a.useRef(r);return c.a.useEffect((function(){!0===b.current&&!1===r&&i.current.focus(),b.current=r}),[r]),Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"post",children:[Object(_.jsxs)("div",{className:"post_header",children:[Object(_.jsx)(h.a,{className:"post_avatar",alt:"Neh Jain",src:k}),Object(_.jsx)("h3",{className:"post_username",children:e.name}),Object(_.jsx)(g.a,{className:"vert_icon",ref:i,"aria-controls":r?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){s((function(e){return!e}))},children:Object(_.jsx)(f.a,{})}),Object(_.jsx)(v.a,{open:r,anchorEl:i.current,role:void 0,transition:!0,disablePortal:!0,children:function(e){var t=e.TransitionProps,n=e.placement;return Object(_.jsx)(y.a,Object(m.a)(Object(m.a)({},t),{},{style:{transformOrigin:"bottom"===n?"center top":"center bottom"},children:Object(_.jsx)(C.a,{children:Object(_.jsx)(S.a,{onClickAway:j,children:Object(_.jsxs)(w.a,{autoFocusItem:r,id:"menu-list-grow",onKeyDown:u,children:[Object(_.jsx)(N.a,{onClick:j,children:"Edit"}),Object(_.jsx)(N.a,{onClick:l,children:"Delete"})]})})})}))}})]}),Object(_.jsx)("img",{className:"post_image",src:e.image_url,alt:""}),Object(_.jsxs)("h4",{className:"post_text",children:[Object(_.jsx)("strong",{children:e.name})," ",e.Caption]})]})})},U=n(120),E=n(116),F=n(117),D=function(e){return Object(_.jsxs)(U.a,{position:"relative",display:"inline-flex",children:[Object(_.jsx)(E.a,Object(m.a)({variant:"determinate"},e)),Object(_.jsx)(U.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(_.jsx)(F.a,{variant:"caption",component:"div",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})},L=function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(0),i=Object(o.a)(s,2),l=i[0],j=i[1],p=Object(a.useState)(""),m=Object(o.a)(p,2),h=m[0],x=m[1];return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"set_post",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&r(e.target.files[0])}}),l?Object(_.jsx)(D,{value:l}):Object(_.jsx)(_.Fragment,{})]}),Object(_.jsx)("br",{}),Object(_.jsx)("input",{type:"text",placeholder:"Add a caption...",value:h,onChange:function(e){return x(e.target.value)}}),Object(_.jsx)("br",{}),Object(_.jsx)(u.a,{onClick:function(){O.ref("images/".concat(c.name)).put(c).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);j(t)}),(function(e){alert(e.message)}),(function(){O.ref("images").child(c.name).getDownloadURL().then((function(t){d.collection("posts").add({timestamp:b.a.firestore.FieldValue.serverTimestamp(),caption:h,imageUrl:t,username:e.username}),j(0),x(""),r(null)}))}))},children:"Upload"})]})})},P=n(68),A=n.n(P),B=Object(i.a)((function(e){return{paper:{position:"absolute",top:"50vh",left:"50vw",marginLeft:"-125px",marginTop:"-150px",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},paper2:{position:"absolute",top:"50vh",left:"50vw",marginLeft:"-165px",marginTop:"-125px",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),R=function(){var e=B(),t=Object(a.useState)([{id:"",post:{}}]),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),b=i[0],O=i[1],m=Object(a.useState)(!1),h=Object(o.a)(m,2),x=h[0],f=h[1],g=Object(a.useState)(!1),v=Object(o.a)(g,2),y=v[0],C=v[1],S=Object(a.useState)(""),w=Object(o.a)(S,2),N=w[0],k=w[1],U=Object(a.useState)(""),E=Object(o.a)(U,2),F=E[0],D=E[1],P=Object(a.useState)(""),R=Object(o.a)(P,2),T=R[0],z=R[1],J=Object(a.useState)(null),M=Object(o.a)(J,2),K=M[0],V=M[1];Object(a.useEffect)((function(){var e=p.onAuthStateChanged((function(e){V(e||null)}));return function(){e()}}),[]),Object(a.useEffect)((function(){d.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(l.a,{open:b,onClose:function(){return O(!1)},children:Object(_.jsx)("div",{className:e.paper,children:Object(_.jsxs)("form",{children:[Object(_.jsxs)("center",{children:[Object(_.jsx)("h2",{children:"Sign Up"}),Object(_.jsx)("br",{})]}),Object(_.jsx)(j.a,{placeholder:"Username",type:"text",value:N,onChange:function(e){return k(e.target.value)}}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)(j.a,{placeholder:"Email",type:"text",value:F,onChange:function(e){return D(e.target.value)}}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)(j.a,{placeholder:"Password",type:"password",value:T,onChange:function(e){return z(e.target.value)}}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("center",{children:Object(_.jsx)(u.a,{type:"submit",onClick:function(e){e.preventDefault(),p.createUserWithEmailAndPassword(F,T).then((function(e){return e.user.updateProfile({displayName:N})})).catch((function(e){return alert(e.message)})),O(!1)},children:"Sign Up"})})]})})}),Object(_.jsx)(l.a,{open:x,onClose:function(){return f(!1)},children:Object(_.jsx)("div",{className:e.paper,children:Object(_.jsxs)("form",{children:[Object(_.jsxs)("center",{children:[Object(_.jsx)("h2",{children:"Login"}),Object(_.jsx)("br",{})]}),Object(_.jsx)(j.a,{placeholder:"Email",type:"text",value:F,onChange:function(e){return D(e.target.value)}}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)(j.a,{placeholder:"Password",type:"password",value:T,onChange:function(e){return z(e.target.value)}}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("center",{children:Object(_.jsx)(u.a,{type:"submit",onClick:function(e){e.preventDefault(),p.signInWithEmailAndPassword(F,T).catch((function(e){return alert(e.message)})),f(!1)},children:"Log In"})})]})})}),Object(_.jsx)(l.a,{open:y,onClose:function(){return C(!1)},children:Object(_.jsx)("div",{className:e.paper2,children:Object(_.jsx)(L,{username:null===K||void 0===K?void 0:K.displayName})})}),Object(_.jsxs)("div",{className:"app_header",children:[Object(_.jsx)("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"Instagram"}),K?Object(_.jsx)(u.a,{className:"btn",variant:"outlined",color:"primary",onClick:function(){return p.signOut()},children:"Logout"}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(u.a,{className:"btn",variant:"outlined",color:"primary",onClick:function(){return f(!0)},children:"Log In"}),Object(_.jsx)(u.a,{className:"btn",variant:"outlined",color:"primary",onClick:function(){return O(!0)},children:"Sign Up"})]})]}),Object(_.jsx)("center",{children:c.map((function(e){return Object(_.jsx)(I,{postId:e.id,Caption:e.post.caption,image_url:e.post.imageUrl,name:e.post.username},e.id)}))}),Object(_.jsx)("div",{className:"upload",children:(null===K||void 0===K?void 0:K.displayName)?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(u.a,{className:"upload_button",onClick:function(){return C(!0)},size:"large",children:Object(_.jsx)(A.a,{color:"primary",fontSize:"large",cursor:"pointer"})})}):Object(_.jsx)("h3",{children:"Login to Upload"})})]})};n(90);s.a.render(Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(R,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.bf9772f8.chunk.js.map